{% from "form.njk" import csrfProtection, textInput, radioGroup, saveAndContinueButton %}

{% macro addressForm(form, csrfToken) %}
    <form method="post">
        {{ csrfProtection(csrfToken) }}

        {{ addressFragment(form) }}
        {{ saveAndContinueButton() }}
    </form>
{% endmacro %}

{# DEPRECATED #}
{% macro addressFields(form) %}
  {{ addressFragment(form) }}
{% endmacro %}

{% macro addressFragment(form, name) %}
  {{ textInput(t('Address line 1'), name + '[line1]' if name else 'line1', form, compound=true, autocomplete = 'address-line1') }}
  {{ textInput(t('Address line 2 (optional)'), name + '[line2]' if name else 'line2', compound=true, form, autocomplete = 'address-line2') }}
  {{ textInput(t('Town or city'), name + '[city]' if name else 'city', form, compound=true, autocomplete = 'address-level2') }}
  {{ textInput(t('Postcode'), name + '[postcode]' if name else 'postcode', form, inputClass='postcode', autocomplete = 'postal-code') }}
{% endmacro %}

{% macro correspondenceAddressFragment(form) %}
  <h2 class="heading-medium">{{ t('Correspondence address') }}</h2>

  {{
  radioGroup(
  label = t('Would you like correspondence sent to a different address?'),
  name = 'hasCorrespondenceAddress',
  options = [
  { label: 'No', value: false },
  { label: 'Yes, add a correspondence address', value: true }
  ],
  isInline = false,
  form = form
  )
  }}

  <div class="panel panel-border-narrow js-hidden" id="hasCorrespondenceAddress-true" aria-hidden="false">
    <p>{{ t('All correspondence will be sent to this address. This is sometimes known as an ’address for service’.') | safe }}</p>
    {{ addressFragment(form, name = 'correspondenceAddress') }}
  </div>
{% endmacro %}
