{% macro input(label, name, form, hint, type='text', inputClass='', compound=false, autocomplete='on') %}
  {% set error = form.errorFor(name) %}
  {% set formGroupClass = 'form-group-compound' if compound else 'form-group' %}
  <div class="{{ formGroupClass }} {% if error %}form-group-error{% endif %}">
    <label for="{{ name }}" id="{{ name }}[label]" class="form-label">{{ t(label) }}
      {% if hint %}
        <span class="form-hint">{{ t(hint) }}</span>
      {% endif %}
    </label>
    {% if error %}
      <span class="error-message">{{ t(error) }}</span>
    {% endif %}
    <input id="{{ name }}" name="{{ name }}" type="{{ type }}" autocomplete="{{ autocomplete | default('on') }}"
           class="form-control {{ inputClass }} {% if error %}form-control-error{% endif %}"
           value="{{ form.valueFor(name) | default('') }}">
  </div>
{% endmacro %}

{% macro textInput(label, name, form, hint, inputClass='', compound=false, autocomplete='on') %}
  {{ input(label, name, form, hint, 'text', inputClass, compound, autocomplete) }}
{% endmacro %}

{% macro poundInput(label, name, form, hint, bold = false) %}
  {% set error = form.errorFor(name) %}
  <div class="form-group {% if error %} form-group-error {% endif %}">
    <label for="{{ name }}" id="{{ name }}[label]" class="form-label{% if bold %}-bold{% endif %}">
      {{ t(label) }}

      {% if hint %}
        <span class="form-hint">{{ t(hint) }}</span>
      {% endif %}
    </label>
    {% if error %}
      <span class="error-message">{{ t(error) }}</span>
    {% endif %}
    <span class="input-symbol-pound">
      <input id="{{ name }}"
             name="{{ name }}" value="{{ form.valueFor(name) | default('') }}"
             type="number"
             class="form-control {% if error %} form-control-error {% endif %}"
             maxlength="10" size="7">
    </span>
  </div>
{% endmacro %}

{% macro searchInput(label, name, form, hint, bold = false) %}
  {% set error = form.errorFor(name) %}
  <div class="form-group{% if error %} form-group-error{% endif %}">
    <label for="{{ name }}" id="{{ name }}[label]" class="form-label{% if bold %}-bold{% endif %}">
      {{ t(label) }}

      {% if hint %}
        <span class="form-hint">{{ t(hint) }}</span>
      {% endif %}
    </label>
    {% if error %}
      <span class="error-message">{{ t(error) }}</span>
    {% endif %}
    <input id="{{ name }}"
           name="{{ name }}" value="{{ form.valueFor(name) | default('') }}"
           type="search"
           class="search-input"">
    <button type="submit" class="search-submit icon icon-search" id="button" title="search" />
  </div>
{% endmacro %}

{% macro textInputInline( name, form, inputClass='', prefixClass='') %}
  {% set error = form.errorFor(name) %}
  <label for="{{ name }}"></label>
  <span class="{{ prefixClass }}">
    <input id="{{ name }}" name="{{ name }}"
           class="form-control {{ inputClass }} {% if error %} form-control-error {% endif %}"
           value="{{ form.valueFor(name) | default('') }}">
  </span>
{% endmacro %}

{% macro emailInput(label, name, form, hint='') %}
  {{ input(label, name, form, hint, 'email') }}
{% endmacro %}

{% macro textArea(label, name, form, inputClass='form-control-3-4', rows=5, labelClass='', bold = false) %}
  {% set error = form.errorFor(name) %}
  <div class="form-group {% if error %} form-group-error {% endif %}">
    <label for="{{ name }}" id="{{ name }}[label]" class="form-label{% if bold %}-bold{% endif %} {{ labelClass }}">
      {{ t(label) }}
    </label>
    {% if error %}
      <span class="error-message">{{ t(error) }}</span>
    {% endif %}
    <textarea id="{{ name }}" name="{{ name }}" rows="{{ rows }}" class="form-control {{ inputClass }} {% if error %}form-control-error{% endif %}">{{ form.valueFor(name) | default('') }}</textarea>

  </div>
{% endmacro %}

{% macro submitButton(label = 'Continue') %}
  <div class="form-group">
    <input type="submit" class="button" value="{{ t(label) }}">
  </div>
{% endmacro %}

{% macro saveAndContinueButton() %}
  {{ submitButton('Save and continue') }}
{% endmacro %}

{% macro linkButton(label, name, class) %}
  <input type="submit" class="{{ class }}" name="{{ name }}" value="{{ t(label) }}">
{% endmacro %}

{% macro yesNoRadio(label, name, form, isInline = false, labelForScreenReadersOnly = true) %}
  {{ radioGroup(
    label,
    name,
    [
      { label: 'Yes', value: 'yes' },
      { label: 'No', value: 'no' }
    ],
    form,
    isInline = isInline,
    labelForScreenReadersOnly = labelForScreenReadersOnly
    )
  }}
{% endmacro %}

{% macro radioOption(label, name, form, value, hint = '', checked = form.valueFor(name) == value, bold = false) %}
  {{ option(label, name, form, value, 'radio', hint, checked, bold) }}
{% endmacro %}

{% macro checkboxOption(label, name, form, value, hint = '', checked = false, bold = false) %}
  {{ option(label, name, form, value, 'checkbox', hint, checked, bold) }}
{% endmacro %}

{% macro option(label, name, form, value, type, hint = '', checked = false, bold = false) %}
  <div class="multiple-choice" data-target="{{ name }}-{{ value }}">
    {% set idValue = name + value | replace(' ', '') %}
    <input id="{{ idValue }}" type="{{ type }}" name="{{ name }}" value="{{ value }}"{% if checked %} checked{% endif %}>
    <label for="{{ idValue }}">
      {% if hint == '' %}
        {{ t(label) }}
      {% else %}
        {% if bold %}
          <strong class="bold-small">{{ t(label) }}</strong>
        {% else %}
          {{ t(label) }}
        {% endif %}
        <br>
        <span class="form-hint">{{ t(hint) }}</span>
      {% endif %}
    </label>
  </div>
{% endmacro %}

{% macro checkboxGroup(label, name, options, form, isInline = false, bold = false, legendHidden = false) %}
  {% set error = form.errorFor(name) %}
  <div class="form-group {% if error %} form-group-error {% endif %}">
    <fieldset name="{{ name }}[label]" id="{{ name }}[label]" {% if isInline %} class="inline" {% endif %}>
      <legend>
        <span class="form-label-bold {% if legendHidden %}visually-hidden{% endif %}">
          {{ t(label) }}
        </span>
        <span class="error-message">{{ t(error) }}</span>
      </legend>
      {% for option in options %}
        {% set selection = form.valueFor(name).indexOf(option.value) %}
        {{ checkboxOption(
          label = option.label,
          name = name,
          form = form,
          value = option.value,
          hint = option.hint,
          checked = (selection != -1),
          bold = bold
        )
        }}
      {% endfor %}
    </fieldset>
  </div>
{% endmacro %}

{% macro checkboxSingle(label, name, option, form, isInline = false, bold = false, legendHidden = false) %}
  {% set error = form.errorFor(name) %}
  {% set selection = form.valueFor(name) %}
  <div class="form-group{% if error %} form-group-error{% endif %}">
    <fieldset id="{{ name }}[label]" {% if isInline %} class="inline" {% endif %}>
      <legend>
        <span class="form-label-bold {% if legendHidden %}visually-hidden{% endif %}">
          {{ t(label) }}
        </span>
        <span class="error-message">{{ t(error) }}</span>
      </legend>
        {{ checkboxOption(
        label = option.label,
        name = name,
        form = form,
        value = option.value,
        hint = option.hint,
        checked = (selection === option.value),
        bold = bold
        )
        }}
    </fieldset>
  </div>
{% endmacro %}

{% macro radioGroup(
    label, name, options, form, isInline = false, legendHidden = false, labelForScreenReadersOnly = false
  ) %}

  {% set error = form.errorFor(name) %}
  {% set selection = form.valueFor(name) %}
  <div class="form-group {% if error %} form-group-error {% endif %}">
    <fieldset name="{{ name }}[label]" id="{{ name }}[label]" {% if isInline %} class="inline" {% endif %}>
      <legend {% if legendHidden %}class="visuallyhidden"{% endif %}>
        <span class="{% if labelForScreenReadersOnly %}visually-hidden{% else %} form-label-bold {% endif %}">
          {{ t(label) }}
        </span>
        <span class="error-message">{{ t(error) }}</span>
      </legend>
      {% for option in options %}
        {{ radioOption(
        label = option.label,
        name = name,
        form = form,
        value = option.value,
        hint = option.hint,
        checked = option.checked or (selection === option.value),
        bold = option.bold
        ) }}
      {% endfor %}
    </fieldset>
  </div>
{% endmacro %}

{% macro radioGroupWithHintPanel(
    label, name, options, form, isInline = false, legendHidden = false, labelForScreenReadersOnly = false
  ) %}

  {% set error = form.errorFor(name) %}
  {% set selection = form.valueFor(name) %}
  <div class="form-group {% if error %} form-group-error {% endif %}">
    <fieldset name="{{ name }}[label]" id="{{ name }}[label]" {% if isInline %} class="inline" {% endif %}>
      <legend {% if legendHidden %}class="visuallyhidden"{% endif %}>
        <span class="{% if labelForScreenReadersOnly %}visually-hidden{% else %} form-label-bold {% endif %}">
          {{ t(label) }}
        </span>
        <span class="error-message">{{ t(error) }}</span>
      </legend>
      {% for option in options %}
        {{ radioOption(
        label = option.label,
        name = name,
        form = form,
        value = option.value,
        checked = option.checked or (selection === option.value),
        bold = option.bold
        ) }}
        {% if option.hint %}
          <div class="panel panel-border-narrow js-hidden" id="{{ name }}-{{ option.value }}" aria-hidden="false">
            <p>{{ option.hint }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </fieldset>
  </div>
{% endmacro %}

{% macro errorSummary(form) %}
  {% if form.hasErrors() %}
    <div class="error-summary" role="group" aria-labelledby="error-summary-heading" tabindex="-1">
      <h1 class="heading-medium error-summary-heading" id="error-summary-heading">
        {{ t('There was a problem') }}
      </h1>
      <ul class="error-summary-list">
        {% for error in form.errors %}
          <li><a href="#{{ error.fieldName }}[label]">{{ t(error.message) }}</a></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endmacro %}

{% macro csrfProtection(token) %}
  <input type="hidden" name="_csrf" value="{{ token }}">
{% endmacro %}

{% macro nameInput(label = 'Your full name', form) %}
  {{ textInput(label, 'name', form, autocomplete='name') }}
{% endmacro %}

{% macro readOnlyField(label, value) %}
  <h2 class="heading-medium">{{ t(label) }}</h2>
  <p>{{ value }}</p>
{% endmacro %}
